version: '2'
services:
    insb:
        extends:
            file: ./docker-compose.yml
            service: ezproxy
        volumes:
            - ./config:/usr/local/ezproxy/config
        environment:
            GATE_SUFFIX: bib.cnrs.fr
        env_file:
            - ./env/insb.env
    inshs:
        extends:
            file: ./docker-compose.yml
            service: ezproxy
        volumes:
            - ./config:/usr/local/ezproxy/config
        environment:
            GATE_SUFFIX: bib.cnrs.fr
        env_file:
            - ./env/inshs.env
    # etc...
networks:
    insb:
        driver: bridge
        ipam:
            config:
                - subnet: 192.168.170.0/24
    inshs:
        driver: bridge
        ipam:
            config:
                - subnet: 192.168.171.0/24
# etc...
